{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784119505}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784119506}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false}, "timestamp": 1766784119901}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766784119904}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "yango_payments.py:get_yango_reconciliation_summary:error", "message": "Error caught in exception handler", "data": {"error_type": "ProgrammingError", "error_message": "(psycopg2.errors.UndefinedTable) relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n[SQL: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT %(limit)s]\n[parameters: {'limit': 1000}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\app\\api\\v1\\yango_payments.py\", line 243, in get_yango_reconciliation_summary\n    result = db.execute(text(sql), params)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2258, in _execute_internal\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 527, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2363, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n[SQL: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT %(limit)s]\n[parameters: {'limit': 1000}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"}, "timestamp": 1766784120105}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784120301}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784120301}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false}, "timestamp": 1766784120672}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766784120672}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "yango_payments.py:get_yango_reconciliation_summary:error", "message": "Error caught in exception handler", "data": {"error_type": "ProgrammingError", "error_message": "(psycopg2.errors.UndefinedTable) relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n[SQL: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT %(limit)s]\n[parameters: {'limit': 1000}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\app\\api\\v1\\yango_payments.py\", line 243, in get_yango_reconciliation_summary\n    result = db.execute(text(sql), params)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2258, in _execute_internal\n    result = conn.execute(\n             ^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 527, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2363, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"C:\\Users\\Pc\\Documents\\Cursor Proyectos\\ct4\\backend\\venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"ops.v_yango_reconciliation_summary\" does not exist\nLINE 1: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pa...\n                      ^\n\n[SQL: SELECT * FROM ops.v_yango_reconciliation_summary ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT %(limit)s]\n[parameters: {'limit': 1000}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n"}, "timestamp": 1766784120861}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784312510}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784312510}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false, "has_summary": false}, "timestamp": 1766784314055}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784314059}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784314059}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false, "has_summary": false}, "timestamp": 1766784315629}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": "2025-12-22", "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784340694}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784340694}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false, "has_summary": false}, "timestamp": 1766784341083}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": "2025-12-08", "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784349822}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784349822}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false, "has_summary": false}, "timestamp": 1766784350212}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784550867}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784550867}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": false, "has_summary": false}, "timestamp": 1766784551255}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784951271}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784951271}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": true, "has_summary": false}, "timestamp": 1766784951664}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "SELECT * FROM ops.v_yango_reconciliation_summary_ui ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766784951664}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "reconciliation_status", "rows_count", "amount_expected_sum", "amount_paid_sum", "amount_diff", "count_expected", "count_paid", "count_pending", "anomalies_total", "count_drivers"]}, "timestamp": 1766784953739}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "reconciliation_status": "pending", "rows_count": "1", "amount_expected_sum": "25.00"}}, "timestamp": 1766784953739}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766784953745}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:before_view_check", "message": "Before checking for view existence", "data": {}, "timestamp": 1766784953745}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "B", "location": "yango_payments.py:get_yango_reconciliation_summary:view_check_result", "message": "View existence check result", "data": {"has_ui": true, "has_summary": false}, "timestamp": 1766784954125}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "SELECT * FROM ops.v_yango_reconciliation_summary_ui ORDER BY pay_week_start_monday DESC, milestone_value, reconciliation_status LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766784954125}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "reconciliation_status", "rows_count", "amount_expected_sum", "amount_paid_sum", "amount_diff", "count_expected", "count_paid", "count_pending", "anomalies_total", "count_drivers"]}, "timestamp": 1766784956203}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "reconciliation_status": "pending", "rows_count": "1", "amount_expected_sum": "25.00"}}, "timestamp": 1766784956203}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766790794433}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "\n        SELECT\n            pay_week_start_monday,\n            milestone_value,\n            COALESCE(SUM(expected_amount), 0) AS amount_expected_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_paid_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_paid_assumed,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_pending_active_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_expired'), 0) AS amount_pending_expired_sum,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_diff,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_diff_assumed,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS anomalies_total,\n            COALESCE(COUNT(*), 0) AS count_expected,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'paid'), 0) AS count_paid,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_active'), 0) AS count_pending_active,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS count_pending_expired,\n            COALESCE(COUNT(DISTINCT CASE WHEN driver_id IS NOT NULL THEN driver_id END), 0) AS count_drivers\n        FROM ops.v_yango_payments_claims_cabinet_14d\n     GROUP BY pay_week_start_monday, milestone_value ORDER BY pay_week_start_monday DESC, milestone_value LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766790799365}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "amount_expected_sum", "amount_paid_sum", "amount_paid_assumed", "amount_pending_active_sum", "amount_pending_expired_sum", "amount_diff", "amount_diff_assumed", "anomalies_total", "count_expected", "count_paid", "count_pending_active", "count_pending_expired", "count_drivers"]}, "timestamp": 1766790801276}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "mode": "real", "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "amount_expected_sum": "25.00", "amount_paid_sum": "0", "amount_paid_assumed": "0"}}, "timestamp": 1766790801276}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766790801280}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "\n        SELECT\n            pay_week_start_monday,\n            milestone_value,\n            COALESCE(SUM(expected_amount), 0) AS amount_expected_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_paid_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_paid_assumed,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_pending_active_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_expired'), 0) AS amount_pending_expired_sum,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_diff,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_diff_assumed,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS anomalies_total,\n            COALESCE(COUNT(*), 0) AS count_expected,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'paid'), 0) AS count_paid,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_active'), 0) AS count_pending_active,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS count_pending_expired,\n            COALESCE(COUNT(DISTINCT CASE WHEN driver_id IS NOT NULL THEN driver_id END), 0) AS count_drivers\n        FROM ops.v_yango_payments_claims_cabinet_14d\n     GROUP BY pay_week_start_monday, milestone_value ORDER BY pay_week_start_monday DESC, milestone_value LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766790804518}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "amount_expected_sum", "amount_paid_sum", "amount_paid_assumed", "amount_pending_active_sum", "amount_pending_expired_sum", "amount_diff", "amount_diff_assumed", "anomalies_total", "count_expected", "count_paid", "count_pending_active", "count_pending_expired", "count_drivers"]}, "timestamp": 1766790806389}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "mode": "real", "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "amount_expected_sum": "25.00", "amount_paid_sum": "0", "amount_paid_assumed": "0"}}, "timestamp": 1766790806390}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766791100327}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "\n        SELECT\n            pay_week_start_monday,\n            milestone_value,\n            COALESCE(SUM(expected_amount), 0) AS amount_expected_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_paid_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_paid_assumed,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_pending_active_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_expired'), 0) AS amount_pending_expired_sum,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_diff,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_diff_assumed,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS anomalies_total,\n            COALESCE(COUNT(*), 0) AS count_expected,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'paid'), 0) AS count_paid,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_active'), 0) AS count_pending_active,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS count_pending_expired,\n            COALESCE(COUNT(DISTINCT CASE WHEN driver_id IS NOT NULL THEN driver_id END), 0) AS count_drivers\n        FROM ops.v_yango_payments_claims_cabinet_14d\n     GROUP BY pay_week_start_monday, milestone_value ORDER BY pay_week_start_monday DESC, milestone_value LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766791102414}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "amount_expected_sum", "amount_paid_sum", "amount_paid_assumed", "amount_pending_active_sum", "amount_pending_expired_sum", "amount_diff", "amount_diff_assumed", "anomalies_total", "count_expected", "count_paid", "count_pending_active", "count_pending_expired", "count_drivers"]}, "timestamp": 1766791104352}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "mode": "real", "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "amount_expected_sum": "25.00", "amount_paid_sum": "0", "amount_paid_assumed": "0"}}, "timestamp": 1766791104352}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A", "location": "yango_payments.py:get_yango_reconciliation_summary:entry", "message": "Endpoint entry with params", "data": {"week_start": null, "milestone_value": null, "status": null, "limit": 1000}, "timestamp": 1766791104359}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:before_query", "message": "SQL query before execution", "data": {"sql": "\n        SELECT\n            pay_week_start_monday,\n            milestone_value,\n            COALESCE(SUM(expected_amount), 0) AS amount_expected_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_paid_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_paid_assumed,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_pending_active_sum,\n            COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_expired'), 0) AS amount_pending_expired_sum,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'paid'), 0) AS amount_diff,\n            COALESCE(SUM(expected_amount), 0) - COALESCE(SUM(expected_amount) FILTER (WHERE paid_status = 'pending_active'), 0) AS amount_diff_assumed,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS anomalies_total,\n            COALESCE(COUNT(*), 0) AS count_expected,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'paid'), 0) AS count_paid,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_active'), 0) AS count_pending_active,\n            COALESCE(COUNT(*) FILTER (WHERE paid_status = 'pending_expired'), 0) AS count_pending_expired,\n            COALESCE(COUNT(DISTINCT CASE WHEN driver_id IS NOT NULL THEN driver_id END), 0) AS count_drivers\n        FROM ops.v_yango_payments_claims_cabinet_14d\n     GROUP BY pay_week_start_monday, milestone_value ORDER BY pay_week_start_monday DESC, milestone_value LIMIT :limit", "params": {"limit": "1000"}}, "timestamp": 1766791106391}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "yango_payments.py:get_yango_reconciliation_summary:after_query", "message": "Query executed successfully", "data": {"rows_count": 24, "first_row_keys": ["pay_week_start_monday", "milestone_value", "amount_expected_sum", "amount_paid_sum", "amount_paid_assumed", "amount_pending_active_sum", "amount_pending_expired_sum", "amount_diff", "amount_diff_assumed", "anomalies_total", "count_expected", "count_paid", "count_pending_active", "count_pending_expired", "count_drivers"]}, "timestamp": 1766791108297}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "D", "location": "yango_payments.py:get_yango_reconciliation_summary:before_pydantic", "message": "Before Pydantic conversion", "data": {"rows_count": 24, "mode": "real", "first_row_sample": {"pay_week_start_monday": "2026-01-05", "milestone_value": "1", "amount_expected_sum": "25.00", "amount_paid_sum": "0", "amount_paid_assumed": "0"}}, "timestamp": 1766791108297}
